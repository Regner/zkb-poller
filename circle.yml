machine:
  services:
    - docker
  environment:
    GCLOUD_PROJECT: "personal-projects-1369"
    DOCKER_IMAGE_NAME: "eu.gcr.io/personal-projects-1369/zkb-poller"
    GCLOUD_ZONE: "europe-west1-d"

dependencies:
  pre:
    - git clone https://github.com/Regner/circleci-kube-scripts.git
    - ./circleci-kube-scripts/ensure-kubernetes-installed.sh
    - ./circleci-kube-scripts/setup-gcloud.sh

test:
  override:
    - echo "No tests yet. :("

deployment:
  build and deploy:
    branch: master
    commands:
      - ./circleci-kube-scripts/docker-build-push.sh
      # - ./circleci-kube-scripts/deploy.sh "eve-notifications" "en-zkillboard"